{% extends 'general/base.html' %}

{% block contenido %}

<div class="blog-container">

    <aside class="barra-lateral">

        <h3 class="titulo-filtro">PANEL DE CONTROL</h3>

        <form method="POST" action="{% url 'blog:path_buscador' %}">
            {% csrf_token %}
            <label style="color:var(--neon-green); font-weight:bold;">B√öSQUEDA:</label>

            <div style="margin-top: 5px; margin-bottom: 10px;">
                <input type="text" name="busqueda" class="input-hacker" placeholder="Escribe el t√≠tulo...">
            </div>

            <button type="submit" class="btn-login" style="width:100%;">üîé BUSCAR</button>
        </form>

        <hr style="border-color: #30363d; margin: 20px 0;">

        <label style="color:var(--neon-green); font-weight:bold; margin-bottom: 10px; display:block;">
            ORDENAR POR FECHA:
        </label>

        <div style="display: flex; gap: 10px; flex-direction: column;">
            <a href="{% url 'blog:path_filtrado_fecha' 'nuevo' %}" class="btn-orden">
                ‚¨áÔ∏è M√°s Recientes
            </a>

            <a href="{% url 'blog:path_filtrado_fecha' 'antiguo' %}" class="btn-orden">
                ‚¨ÜÔ∏è M√°s Antiguos
            </a>
        </div>

        <hr style="border-color: #30363d; margin: 20px 0;">

        <label style="color:var(--neon-green); font-weight:bold; margin-bottom: 10px; display:block;">
            ORDEN ALFAB√âTICO:
        </label>

        <div style="display: flex; gap: 10px; flex-direction: column;">
            <a href="{% url 'blog:path_filtrado_alfabetico' 'az' %}" class="btn-orden">
                üî§ T√≠tulo (A - Z)
            </a>

            <a href="{% url 'blog:path_filtrado_alfabetico' 'za' %}" class="btn-orden">
                üî† T√≠tulo (Z - A)
            </a>
        </div>

        <hr style="border-color: #30363d; margin: 20px 0;">

        <label style="color:var(--neon-green); font-weight:bold;">CATEGOR√çAS:</label>
        <div class="dropdown-container" style="margin-top: 5px;">
            <button class="btn-dropdown">üìÇ Seleccionar Categor√≠a ‚ñº</button>
            <div class="dropdown-content">
                <a href="{% url 'blog:path_listar_articulos' %}">[X] Ver todo</a>
                {% for c in categorias %}
                <a href="{% url 'blog:path_filtrado_categoria' c.pk %}">> {{ c.nombre_categoria }}</a>
                {% endfor %}
            </div>
        </div>

        {% if user.is_authenticated %}
        <hr style="border-color: #d63384; margin: 30px 0;">

        <label style="color: #d63384; font-weight:bold; display:block; margin-bottom:10px;">
            CONTRIBUIR:
        </label>

        <a href="{% url 'blog:path_crear_articulo' %}" class="btn-login" style="
                display:block; 
                text-align:center; 
                border: 1px solid #d63384; 
                color: #d63384;
                background-color: rgba(214, 51, 132, 0.05);
            " onmouseover="this.style.backgroundColor='#d63384'; this.style.color='white';"
            onmouseout="this.style.backgroundColor='transparent'; this.style.color='#d63384';">
            + NUEVO ART√çCULO
        </a>
        {% endif %}

    </aside>

    <section class="columna-articulos">

        <h1 class="titulo-seccion">ARTICULOS</h1>

        <div class="grilla-articulos">

            {% for a in articulos %}

            <article class="card">

                {% if a.imagen %}
                <div class="card-img-container">
                    <img src="{{ a.imagen.url }}" alt="{{ a.titulo }}">
                </div>
                {% endif %}

                <div class="card-contenido">
                    <h3>{{ a.titulo }}</h3>

                    <span class="card-fecha" style="font-size: 0.8em; color: gray;">
                        {{ a.fecha_publicacion|date:"d/m/Y" }}
                    </span>

                    <a href="{% url 'blog:path_detalle_articulo' a.pk %}" class="btn-leer">
                        ACCEDER AL ARTICULO >
                    </a>

                    {% if user == a.autor or user.is_staff %}
                    <div class="acciones-admin"
                        style="margin-top: 10px; border-top: 1px solid #30363d; padding-top: 10px;">
                        <a href="{% url 'blog:path_modificar_articulo' a.pk %}"
                            style="color: yellow; margin-right: 10px; text-decoration: none; font-size: 0.9rem;">
                            ‚úèÔ∏è Modificar
                        </a>
                        <a href="{% url 'blog:path_eliminar_articulo' a.pk %}"
                            style="color: red; text-decoration: none; font-size: 0.9rem;">
                            üóëÔ∏è Eliminar
                        </a>
                    </div>
                    {% endif %}
                </div>

            </article>

            {% empty %}
            <p>No hay art√≠culos cargados en el sistema.</p>
            {% endfor %}

        </div>

    </section>

</div>

{% endblock contenido %}